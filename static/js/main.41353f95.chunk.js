(this["webpackJsonpcomment-app"]=this["webpackJsonpcomment-app"]||[]).push([[0],{170:function(e,t,a){e.exports=a(339)},338:function(e,t,a){},339:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(9),o=a(24),i=a(19),s=a(73),l=a(27),u=a(28),m=a(31),p=a(29),d=a(32),h=a(340),f=a(11),b=a(25),v=a(345),g=a(341),O=a(167),E=a(95),j=a(119),y=a.n(j),w=a(33),k=a.n(w),C=[{id:1,name:"Han",username:"han",password:"han",avatar:"https://images2.minutemediacdn.com/image/upload/c_crop,h_1193,w_2121,x_0,y_64/f_auto,q_auto,w_1100/v1565279671/shape/mentalfloss/578211-gettyimages-542930526.jpg"},{id:2,name:"Alex",username:"alex",password:"alex",avatar:"http://www.pethealthnetwork.com/sites/default/files/content/images/5-silent-killers-cats-475212379.jpg"},{id:3,name:"Koitess",username:"koitess",password:"koitess",avatar:"https://upload.wikimedia.org/wikipedia/commons/thumb/4/43/Cute_dog.jpg/1200px-Cute_dog.jpg"}],P=[{id:1,name:"Produit 1",description:"Produit 1",seller:{id:1,name:"Han",avatar:"https://images2.minutemediacdn.com/image/upload/c_crop,h_1193,w_2121,x_0,y_64/f_auto,q_auto,w_1100/v1565279671/shape/mentalfloss/578211-gettyimages-542930526.jpg"},comments:[{author:{id:2,name:"Alex",avatar:"http://www.pethealthnetwork.com/sites/default/files/content/images/5-silent-killers-cats-475212379.jpg"},content:"Ceci est un commentaire priv\xe9",datetime:k()().subtract(1,"day"),isPrivate:!0},{author:{id:2,name:"Alex",avatar:"http://www.pethealthnetwork.com/sites/default/files/content/images/5-silent-killers-cats-475212379.jpg"},content:"Ceci est un commentaire public",datetime:k()().subtract(3,"day"),isPrivate:!1}]},{id:2,name:"Produit 2",description:"Produit 2",seller:{id:2,name:"Alex",avatar:"http://www.pethealthnetwork.com/sites/default/files/content/images/5-silent-killers-cats-475212379.jpg"},comments:[{author:{id:2,name:"Alex",avatar:"http://www.pethealthnetwork.com/sites/default/files/content/images/5-silent-killers-cats-475212379.jpg"},content:"Ceci est un commentaire priv\xe9",datetime:k()().subtract(1,"day"),isPrivate:!0},{author:{id:2,name:"Alex",avatar:"http://www.pethealthnetwork.com/sites/default/files/content/images/5-silent-killers-cats-475212379.jpg"},content:"Ceci est un commentaire public",datetime:k()().subtract(2,"day"),isPrivate:!1}]},{id:3,name:"Produit 3",description:"Produit 3",seller:{id:2,name:"Alex",avatar:"http://www.pethealthnetwork.com/sites/default/files/content/images/5-silent-killers-cats-475212379.jpg"},comments:[{author:{id:2,name:"Alex",avatar:"http://www.pethealthnetwork.com/sites/default/files/content/images/5-silent-killers-cats-475212379.jpg"},content:"Ceci est un commentaire priv\xe9",datetime:k()(),isPrivate:!0},{author:{id:2,name:"Alex",avatar:"http://www.pethealthnetwork.com/sites/default/files/content/images/5-silent-killers-cats-475212379.jpg"},content:"Ceci est un commentaire public",datetime:k()(),isPrivate:!1}]}],I=a(168),_=a(151),S=a(152),x=Object(_.connectedReduxRedirect)({authenticatedSelector:function(e){return e.reducer.me&&e.reducer.me.id},redirectPath:"/login",redirectAction:S.replace});function A(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var N={me:{},products:P};function D(e,t){return Object.assign({},e,{me:t.user})}function U(e,t){return Object.assign({},e,{me:{}})}function R(e,t){var a=e.products.map((function(a){var n=a.comments||[];return a.id===t.productId?function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?A(a,!0).forEach((function(t){Object(E.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):A(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},a,{comments:[].concat(Object(O.a)(n),[{id:y()(),content:t.comment,author:e.me,datetime:k()(),isPrivate:t.isPrivate}])}):a}));return Object.assign({},e,{products:a})}var T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_COMMENT":return R(e,t);case"USER_LOGIN_SUCCESS":return D(e,t);case"USER_LOGOUT_SUCCESS":return U(e,t);default:return e}},M=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).handleMenuClick=function(e){if("user"!==e.key)return"logout"===e.key?a.props.logout().then((function(e){return a.props.history.replace(de)})):void a.props.onClick(e.key)},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.me,t=[{path:pe,name:"Acceuil",icon:"home"},{path:he,name:"Produits",icon:"bars"}];return r.a.createElement(h.a.Sider,{trigger:null,collapsible:!0,collapsed:this.props.siderIsCollapsed},r.a.createElement(v.a,{theme:"dark",mode:"inline",onClick:this.handleMenuClick},r.a.createElement(v.a.Item,{key:"user"},r.a.createElement(g.a,{src:e.avatar}),r.a.createElement("span",null,e.name)),t.map((function(e){return r.a.createElement(v.a.Item,{key:e.path},r.a.createElement(f.a,{type:e.icon}),r.a.createElement("span",null,e.name))})),r.a.createElement(v.a.Item,{key:"logout"},r.a.createElement(f.a,{type:"logout"}),r.a.createElement("span",null,"D\xe9connecter"))))}}]),t}(n.Component),L=Object(b.d)(i.e,Object(o.connect)((function(e){return{me:e.reducer.me}}),{logout:function(e,t){return function(e,t){return Promise.resolve(!0).then((function(t){return e({type:"USER_LOGOUT_SUCCESS"})}))}}}))(M),V=a(343),G=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).handleSelectProduct=function(e){return function(){a.props.history.push(fe.replace(":productId",e))}},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props.products;return r.a.createElement(V.a,{itemLayout:"horizontal",className:"product-list",dataSource:t,renderItem:function(t){return r.a.createElement(V.a.Item,{onClick:e.handleSelectProduct(t.id)},r.a.createElement(V.a.Item.Meta,{avatar:r.a.createElement("div",{className:"app-logo"}),title:t.name,description:t.description}))}})}}]),t}(n.Component),Y=Object(b.d)(i.e,Object(o.connect)((function(e){return{products:e.reducer.products}}),null))(G),H=a(66),q=a.n(H),z=a(344),J=a(349),X=a(342),B=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.comments;return r.a.createElement(V.a,{dataSource:e,itemLayout:"horizontal",renderItem:function(e){return r.a.createElement(X.a,Object.assign({},e,{author:e.author.name,avatar:e.author.avatar,datetime:k()(e.author.datetime).format("DD/MM/YYYY hh:mm")}))}})}}]),t}(n.Component),K=a(346),F=a(347),Q=a(348),W=a(166),Z=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={comment:"",isPrivate:!1},a.handleCommentInput=function(e){a.setState({comment:e.target.value})},a.handlePrivateCheckbox=function(e){a.setState({isPrivate:e.target.checked})},a.handleAddComment=function(){a.props.addComment(a.props.productId,a.state.comment,a.state.isPrivate),a.setState({comment:""})},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state,t=e.comment,a=e.isPrivate;return r.a.createElement("div",null,r.a.createElement(K.a.Item,null,r.a.createElement(F.a.TextArea,{rows:4,value:t,placeholder:"Ajouter un commentaire",onChange:this.handleCommentInput,onPressEnter:this.handleAddComment})),r.a.createElement(K.a.Item,null,r.a.createElement(Q.a,{value:a,onChange:this.handlePrivateCheckbox},"Priv\xe9")),r.a.createElement(K.a.Item,null,r.a.createElement(W.a,{htmlType:"submit",disabled:!t.length,onClick:this.handleAddComment,type:"primary"},"Envoyer")))}}]),t}(n.Component),$=Object(o.connect)(null,{addComment:function(e,t,a){return{type:"ADD_COMMENT",productId:e,comment:t,isPrivate:a}}})(Z),ee=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props.product;if(console.log(this.props),!t)return"Produit non trouv\xe9";var a=(t.comments||[]).filter((function(a){return function(e,t,a){return a===t||!e.isPrivate||e.author.id===a}(a,t.seller.id,e.props.meId)}));return r.a.createElement(z.a,{className:"product-item"},r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("div",{className:"app-logo product-img"})),r.a.createElement(J.a,{title:t.name},r.a.createElement(J.a.Item,{label:"Description"},t.description),r.a.createElement(J.a.Item,{label:"Vendeur"},r.a.createElement("div",null,r.a.createElement(g.a,{src:t.seller.avatar})," ",t.seller.name))),a.length&&r.a.createElement(B,{comments:a}),r.a.createElement(X.a,{content:r.a.createElement($,{productId:t.id})}))}}]),t}(n.Component),te=Object(o.connect)((function(e,t){var a=q()(t,"match.params.productId");return{product:e.reducer.products.find((function(e){return e.id==a})),meId:e.reducer.me.id}}),null)(ee),ae=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={siderIsCollapsed:!1},a.toggle=function(){a.setState({siderIsCollapsed:!a.state.siderIsCollapsed})},a.goTo=function(e){a.props.history.push(e)},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(h.a,{className:"app-container container"},r.a.createElement(L,{siderIsCollapsed:this.state.siderIsCollapsed,onClick:this.goTo}),r.a.createElement(h.a,null,r.a.createElement(h.a.Header,{style:{background:"#fff",padding:0}},r.a.createElement(f.a,{className:"trigger",type:this.state.siderIsCollapsed?"right":"left",onClick:this.toggle})),r.a.createElement(h.a.Content,null,r.a.createElement(i.c,null,r.a.createElement(i.a,{exact:!0,key:pe,path:pe,component:Y}),r.a.createElement(i.a,{exact:!0,key:he,path:he,component:Y}),r.a.createElement(i.a,{exact:!0,key:fe,path:fe,component:te})))))}}]),t}(n.Component),ne=Object(b.d)(i.e,x)(ae),re=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={username:null,password:null},a.handleValueChange=function(e){a.setState(Object(E.a)({},e.target.name,e.target.value))},a.handleSubmit=function(e){e.preventDefault();var t=a.state,n=t.username,r=t.password;a.props.login(n,r).then((function(e){a.props.history.push(pe)}))},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(h.a,{className:"container align-items-center justify-content-center"},r.a.createElement(K.a,{onSubmit:this.handleSubmit,onChange:this.handleValueChange,className:"login-form"},r.a.createElement(K.a.Item,null,r.a.createElement(F.a,{name:"username",prefix:r.a.createElement(f.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Votre identifiant"})),r.a.createElement(K.a.Item,null,r.a.createElement(F.a,{name:"password",prefix:r.a.createElement(f.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Votre mot de passe"})),r.a.createElement(K.a.Item,null,r.a.createElement(W.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"Connexion"))))}}]),t}(n.Component),ce=Object(b.d)(i.e,Object(o.connect)((function(e){return{me:e.reducer.me}}),{login:function(e,t){return function(a,n){return function(e,t){return new Promise((function(a,n){var r=C.find((function(a){return a.username===e&&a.password===t}));if(void 0!==r){r.password;a(Object(I.a)(r,["password"]))}else n()}))}(e,t).then((function(e){return a({type:"USER_LOGIN_SUCCESS",user:e}),e})).catch((function(e){return a({type:"USER_LOGIN_ERROR",error:e})}))}}}))(re),oe=a(164),ie=a(149),se=a(165),le=a.n(se)()(),ue=Object(b.c)({router:Object(s.b)(le),reducer:T}),me=function(e){var t=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||b.d,a=[oe.a,Object(ie.a)(le)];return Object(b.e)(e,t(b.a.apply(void 0,a)))},pe=(a(337),a(338),"/"),de="/login",he="/products",fe="/products/:productId";Object(c.render)(r.a.createElement((function(){return r.a.createElement(o.Provider,{store:me(ue)},r.a.createElement(s.a,{history:le},r.a.createElement("div",{className:"container"},r.a.createElement(i.c,null,r.a.createElement(i.a,{exact:!0,key:de,path:de,component:ce}),r.a.createElement(i.a,{key:pe,path:pe,component:ne})))))}),null),document.getElementById("root"))}},[[170,1,2]]]);
//# sourceMappingURL=main.41353f95.chunk.js.map